<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="carPoolMapper">
	
<resultMap type="carPool" id="carPoolResultSet">
	<id column="BOARD_NO" property="boardNo" />
	<result column="RECRUITS_NUM" property="recruitsNum" />
	<result column="RECRUITS_CURR" property="recruitsCurr" />
	<result column="IS_END" property="isEnd" />
	<result column="LOCATION_NO" property="locationNo" />
	<association property="board" column="BOARD_NO" javaType="com.ace.thrifty.board.model.vo.Board">
			<id column="BOARD_NO" property="boardNo"/>			
			<result column="CATEGORY_S_NO"  property="categorySNo"/>
			<result column="CONTENT"  property="content"/>
			<result column="CREATE_DATE"  property="createDate"/>
			<result column="READ_COUNT"  property="readCount"/>
			<result column="REPORT_COUNT"  property="reportCount"/>
			<result column="TITLE"  property="title"/>
			<result column="USER_NO"  property="userNo"/>
			<result column="WISH_COUNT"  property="wishCount"/>
	</association>
	<collection property="imageList" column="BOARD_NO" javaType="java.util.ArrayList" ofType="com.ace.thrifty.board.model.vo.Image">
			<id column="IMG_NO" property="imgNo"/>
			<result column="BOARD_NO" property="boardNo"/>
			<result column="ORIGIN_NAME" property="originName"/>
			<result column="CHANGE_NAME" property="changeName"/>
			<result column="FILE_LEVEL" property="fileLevel"/>
			<result column="STATUS" property="status"/>
		</collection>
</resultMap>

<select id="driveList" resultMap="carPoolResultSet">
	SELECT
		C.LOCATION_NO,
		B.TITLE ,
		C.RECRUITS_NUM ,
		C.RECRUITS_CURR
	FROM CARPOOL C
	JOIN BOARD B ON C.BOARD_NO = B.BOARD_NO
	JOIN UPPER_CATEGORY UC ON UC.CATEGORY_U_NO = B.CATEGORY_U_NO
	WHERE B.STATUS = 'Y' AND UC.CATEGORY_U_NO = 3
</select>
</mapper>
